# Worklog
파일명은 {@date}-{@function이름}-worklog.md 로 docs 폴더 하위에 그날의 작업 기록을 남겨놓는다. 
현재 기준 작업 브랜치를 기록하고 오늘 수정사항, 추가사항, 남은 사항들을 아래의 형식에 맞춰 바꿔준다.

## 2025-04-13 (작업한 날짜)

### 수정 완료 사항 
1. Do Hyeon, Black Han Sans 폰트 추가 - fontFamily.js
2. 이미지 업로드 레이아웃 수정 - imageUpload.js


## 2025-04-26 

### 수정 완료 사항 
/docs/20250411-worklog.md
/docs/20250413-link-worklog.md
/docs/20250415-table-worklog.md
/docs/20250418-bugfix-worklog.md
/docs/20250427-onoff-line-worklog.md
/docs/20250428-media-worklog.md
/docs/20250501-bugfix-worklog.md
/docs/20250502-worklog.md

## 2025-04-27 

### 수정 완료 사항 
1. html 에서 아이콘 on off 기능으로 통합 표시 하도록 변경 
2. media 기능 추가 - 유튜브 링크 가능하도록 추가 (레이어 통일성 유지 - link.js 참고)
3. code highlight 적용 (speed-highlight.js)

### 추가 개발 사항 
- [x] 이미지 업로드 후 이미지 사이즈 조절 기능 추가 함  (완료)
- [x] link 선택시 에디터 선택 블록 원복 수정 해야 함 
- [ ] link 빈 칸으로 입력시 alert 창에서 엔터 누를 경우 메시지 창이 계속 나오는 버그 수정해야 함(엔터 클릭시 link layer는 유지하고 alert box만 닫히게)
- [x] url 입력값 체크할 때 alert 엔터 누를 때 경고 레이어가 계속 뜨는 버그 (닫혀야함) 수정 필요 
- [x] 스크롤 이동시 link와 image upload의 레이어는 고정값인데 나머지는 간격이 벌어지는 버그 수정 해야 함 
- [x] 테이블 컬럼 사이즈 고정과 변경 (https://codepen.io/validide/pen/aOKLNo) 
- [x] 동영상 첨부 기능 추가 (완료)
- [x] 동영상 레이어 링크 형태로 플로팅 레이어가 뜨도록 변경 필요 (완료)
- [ ] 동영상 오브젝트 크기 조절 가능하도록 수정 (완료)
- [x] index.html에서 에디터의 너비와 높이를 지정하여 에디터의 크기를 변경할 수 있도록 수정, 높이의 경우 내용이 길어지면 스크롤링이 되어야 함 
- [x] 코드 하일라이팅 기능 추가해야함 (https://highlightjs.org/#usage 참고) 
- [x] 테이블 컬럼 사이즈 고정과 변경 (https://codepen.io/validide/pen/aOKLNo) 
- [ ] font family의 경우 font manager를 따로 빼서 추가, 삭제 할 수 있도록 분리/관리 해야함 
- [ ] rich 화면 모드와 html 소스 보기 모드 탭을 구현해야 함
- [ ] 테이블 ok 버튼 클릭시 공통 경고 메시지 출력하기 
- [ ] 이미지 업로드 역시 공통 경고 메시지 출력하기 
- [ ] 이미지 레이어와 테이블 레이어의 경우 닫힘 기능이 상호간에 영향을 주는 버그가 있으므로 개선해야 함 
- [ ] 다른 플로팅 레이어를 링크 레이어 처럼 위치가 바뀌지 않도록 변경해야 함 
- [ ] 이미지 업로드 기능 (public 폴더에 이미지 업로드, 파일명 리플레이스 해서 반환하는 함수) 추가 
- [ ] html 모드, wysiwyg 모드 구분, 탭 형태로 하단에 구분 해야 함 
- [ ] html export, import 기능 추가 
- [ ] SqlLite 내장 작업 추가 
- [ ] 이미지 업로드 서버측 개발해야 함 (DB 연동)



## 버그 리포트 
- [x] clear formatting 기능 수행시에 선택된 블록의 html태그만 제거하는게 아니라 아래에 있는 태그도 제거하는 문제 발생 (해결완료)
- [x] 링크 삽입 후 해당 링크를 클릭해서 새창으로 열어야 하는데 현재 태그만 적용되어 있고 클릭 기능 수행이 안됌 (해결완료)
- [x] 테이블 UI 어긋나는 부분 수정 (Style, Line 셀렉트 박스에 화살표 다운 표시가 있어야 하고 레이어 크기가 어긋나 있으며, 테이블 레이어의 다룬곳 클릭시 Style과 Line의 레이어는 닫혀야 함) (해결완료)
- [x] 테이블 인서트시 table.js:584 Uncaught IndexSizeError: Failed to execute 'getRangeAt' on 'Selection': 0 is not a valid index.
    at insertTable (table.js:584:33)
    at HTMLButtonElement.<anonymous> (table.js:336:17)
insertTable	@	table.js:584
(익명)	@	table.js:336 에러 발생 (해결 완료)
- [x] list 태그 분리 및 css 적용 필요 (해결 완료)
- [x] 블록 쿼드시 쉬프트 엔터는 쿼트블록이 늘어나야 하고, 기본 클릭시 생성되는 쿼트 블록은 내부에 포커스가 있어야 한다. (해결완료)
- [x] 테이블은 그리드 형태로 컬럼의 열을 조절할 수 있어야 한다. 또 컬럼별로 비율이 정확히 나눠져서 균등한 width를 갖도록 해야 하는데 현재는 컨텐츠의 길이에 따라 다른 컬럼의 너비가 줄어드는 형태로 되어있다. 
- [x] 레이어 뜨는 방식 통일해야 함 (link.js 방식처럼 스크롤과 상관없이 아이콘 밑에 레이어가 뜨도록 변경) - 현재 Font-family만 적용, 추가로 디버깅 해야함 (버그있음)
- [x] 서식 제거시에 일부 블럭형 (리스트 등)에 서식 제거가 안되는 버그 해결해야 함 (동영상, 이미지, 테이블, 코드블럭은 delete 로 개체를 삭제할 수 있음)
- [x] 코드 하일라이트, 이미지 업로드 등 레이어 클릭시 스크롤이 위로 올라가는 버그있음 (20250511)
- [x] 코드 하일라이트 자동 감지가 제일 위로 오게 조정필요 (20250511)
- [x] 동영상 크기 조절 기능 추가해야 함 
- [ ] 이미지 처음 생성했을때 선택 후 정렬하면 정렬되지 않음. 다시 선택해서 정렬해야 함 


### 유의사항 
1. index.html에 class="lite-editor-content" 추가할 경우 에디터 아이콘 깨짐 

## 2025-05-12 코드 아키텍처 개선 계획

### 리팩토링 항목
- [ ] 플러그인 코드 중복 제거
  - [ ] 각 플러그인 파일에서 중복된 selection 관련 함수 제거 (saveSelection/restoreSelection 등)
  - [ ] plugin-util.js의 기능 직접 사용하도록 통일
  - [ ] 선택 관련 로직을 중앙화하여 일관성 유지

- [ ] 폴백 로직 중앙화
  - [ ] 개별 플러그인에서 구현된 폴백 로직을 plugin-util.js로 이동
  - [ ] 공통 폴백 메커니즘 구현으로 코드 중복 제거
  - [ ] 일관된 에러 처리 패턴 적용

- [ ] 아키텍처 개선
  - [ ] 선택 관리 기능 강화 및 전역 상태 관리 개선
  - [ ] 단일 인스턴스 패턴 적용으로 일관된 플러그인 관리
  - [ ] 플러그인 생성 팩토리 함수 구현
  - [ ] 모듈 간 의존성 명확화 및 구조 개선

- [ ] 개발자 경험 개선
  - [ ] 플러그인 개발 가이드라인 문서화
  - [ ] API 참조 문서 작성
  - [ ] 일관된 코드 스타일 가이드 제공
  - [ ] 디버깅 및 로깅 기능 개선


### 플러그인 기능 구현

### UI/UX 개선
- [ ] 툴바 아이콘/플러그인 관련 CSS/UI 개선
- [ ] 모바일 환경 지원 강화
- [ ] 다크 모드 지원

### 코드 개선
- [ ] 레거시 format.js 등 불필요한 코드 정리
- [ ] 플러그인 로드 방식 최적화
- [ ] 코드 문서화 강화

## 버그 수정
- [ ] 정렬 관련 남은 이슈 해결
- [ ] 브라우저 호환성 이슈 점검 및 수정

## 테스트 및 문서화
- [ ] 각 플러그인별 단위 테스트 작성
- [ ] 통합 테스트 시나리오 작성
- [ ] 사용자 매뉴얼 작성
- [ ] API 문서 작성

## 배포 및 유지보수
- [ ] npm 패키지 배포 준비
- [ ] 버전 관리 체계 수립
- [ ] 이슈 트래킹 시스템 설정
- [ ] 연속 붙여넣기 안됌
- [ ] 붙여넣기 후 선택 블록 해제 되어야 함 


1. 들여쓰기/내어쓰기 (탭, 시프트+탭) 단축키가 잘 안될때가 있어요.
2. 컨텐츠의 가장 아래가 코드블록인 경우 그 아래에 일반 텍스트를 넣는 방법이 있으면 좋을 것 같습니당
3. clear format이 컨텐츠 구성에 따라서 컨텐츠가 사라지는 경우가 있네용
4. 코드블럭 안에서 가로선을 삽입하면 에러가 나유
5. 체크박스와 리스트들을 어케하다보면 여러 줄이 한 줄이 되어요
6. 넘버링, 불릿, 체크박스 한번 더 클릭하면 원복 되어야 함
7. 이미지 클립보드에 있는거 입력 가능하게 
8. 현재 bullet list에서 엔터 후 탭키를 두번 누르면 bullet style이 사라지는 버그가 있음 (마이너)
9. b, u, i, s 단축키 윈도우, 맥 전용 기본키로 다시 설정해야 함 (충돌이 나는 상황이 있을수 있음 - 마이너)






